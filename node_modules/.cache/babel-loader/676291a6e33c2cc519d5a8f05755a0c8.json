{"ast":null,"code":"var _jsxFileName = \"/home/waleed/Desktop/MintWebsites/Mint-Nfts-dapp/src/pages/HomePage/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { connect } from \"../../redux/blockchain/blockchainActions\";\nimport { connectWallet } from \"../../redux/blockchain/blockchainActions\";\nimport { fetchData } from \"./../../redux/data/dataActions\";\nimport axios from 'axios';\nimport { Container, Row } from \"react-bootstrap\";\nimport Navbar from \"../../components/Navbar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst {\n  createAlchemyWeb3,\n  ethers\n} = require(\"@alch/alchemy-web3\");\n\nvar Web3 = require('web3');\n\nvar Contract = require('web3-eth-contract');\n\nfunction Home() {\n  _s();\n\n  let cost = 0;\n  const dispatch = useDispatch();\n  const blockchain = useSelector(state => state.blockchain);\n  const data = useSelector(state => state.data);\n  const [claimingNft, setClaimingNft] = useState(false);\n  const [mintDone, setMintDone] = useState(false);\n  const [supply, setTotalSupply] = useState(0);\n  const [feedback, setFeedback] = useState(\"\");\n  const [mintAmount, setMintAmount] = useState(2);\n  const [displayCost, setDisplayCost] = useState(cost);\n  const [state, setState] = useState(-1);\n  const [canMintWL, setCanMintWL] = useState(false);\n  const [disable, setDisable] = useState(false);\n  const [CONFIG, SET_CONFIG] = useState({\n    CONTRACT_ADDRESS: \"\",\n    SCAN_LINK: \"\",\n    NETWORK: {\n      NAME: \"\",\n      SYMBOL: \"\",\n      ID: 0\n    },\n    NFT_NAME: \"\",\n    SYMBOL: \"\",\n    MAX_SUPPLY: 1,\n    WEI_COST: 0,\n    DISPLAY_COST: 0,\n    GAS_LIMIT: 0,\n    MARKETPLACE: \"\",\n    MARKETPLACE_LINK: \"\",\n    SHOW_BACKGROUND: false\n  });\n\n  const claimNFTs = () => {\n    let cost = 0;\n\n    if (state == 1) {\n      cost = CONFIG.WEI_COST_WL;\n    } else {\n      cost = CONFIG.WEI_COST_PU;\n    }\n\n    let gasLimit = CONFIG.GAS_LIMIT;\n    let totalCostWei = String(cost * mintAmount);\n    let totalGasLimit = String(gasLimit * mintAmount);\n    setFeedback(`Minting your ${CONFIG.NFT_NAME}`);\n    setClaimingNft(true);\n    setDisable(true);\n    blockchain.smartContract.methods.mint(mintAmount).send({\n      gasLimit: String(totalGasLimit),\n      to: CONFIG.CONTRACT_ADDRESS,\n      from: blockchain.account,\n      value: totalCostWei\n    }).once(\"error\", err => {\n      console.log(err);\n      setFeedback(\"Sorry, something went wrong please try again later.\");\n      setClaimingNft(false);\n    }).then(receipt => {\n      setMintDone(true);\n      setFeedback(`Complete , Welcome to the Twisted Family!`);\n      setClaimingNft(false);\n      blockchain.smartContract.methods.totalSupply().call().then(res => {\n        setTotalSupply(res);\n      });\n      dispatch(fetchData(blockchain.account));\n    });\n  };\n\n  const decrementMintAmount = () => {\n    let newMintAmount = mintAmount - 2;\n\n    if (newMintAmount < 2) {\n      newMintAmount = 2;\n    }\n\n    setMintAmount(newMintAmount);\n\n    if (state == 0 || state == -1) {\n      setDisplayCost(0.00);\n    } else if (state == 1) {\n      setDisplayCost(parseFloat(CONFIG.DISPLAY_COST_WL * newMintAmount).toFixed(3));\n    } else {\n      setDisplayCost(parseFloat(CONFIG.DISPLAY_COST_PU * newMintAmount).toFixed(3));\n    }\n  };\n\n  const incrementMintAmount = () => {\n    let newMintAmount = mintAmount + 2;\n    console.log(newMintAmount);\n\n    if (newMintAmount > 8) {\n      newMintAmount = 8;\n    }\n\n    setMintAmount(newMintAmount);\n\n    if (state == 0 || state == -1) {\n      setDisplayCost(0.00);\n    } else if (state == 1) {\n      setDisplayCost(parseFloat(CONFIG.DISPLAY_COST_WL * newMintAmount).toFixed(3));\n    } else {\n      setDisplayCost(parseFloat(CONFIG.DISPLAY_COST_PU * newMintAmount).toFixed(3));\n    }\n  };\n\n  const maxNfts = () => {\n    if (state == 0 || state == -1) {\n      setDisplayCost(0.00);\n    } else if (state == 1) {\n      setMintAmount(CONFIG.MAX_LIMIT);\n      setDisplayCost(parseFloat(CONFIG.DISPLAY_COST_WL * CONFIG.MAX_LIMIT).toFixed(3));\n    } else {\n      setMintAmount(CONFIG.MAX_LIMIT);\n      setDisplayCost(parseFloat(CONFIG.DISPLAY_COST_PU * 8).toFixed(3));\n    }\n  };\n\n  const getDataWithoutWallet = async () => {\n    const web3 = createAlchemyWeb3(\"https://eth-mainnet.alchemyapi.io/v2/EDLW4rQqMI3LEJUWifxT04jTycowEQNU\");\n    const abiResponse = await fetch(\"/config/abi.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    });\n    const abi = await abiResponse.json();\n    var contract = new Contract(abi, '0xB1B75818b813af1Ad69e8827533aE3bFFC81f137');\n    contract.setProvider(web3.currentProvider);\n    console.log(contract);\n    const totalSupply = await contract.methods.totalSupply().call();\n    setTotalSupply(totalSupply);\n  };\n\n  const getData = async () => {\n    if (blockchain.account !== \"\" && blockchain.smartContract !== null) {\n      dispatch(fetchData(blockchain.account));\n      let currentState = await blockchain.smartContract.methods.currentState().call();\n      console.log({\n        currentState\n      });\n      setState(currentState);\n\n      if (currentState == 0) {\n        setDisplayCost(0.00);\n        setDisable(true);\n        setFeedback(\"Minting is not live yet!\");\n      } else if (currentState == 1) {\n        let mintWL = await blockchain.smartContract.methods.isWhitelisted(blockchain.account).call();\n        console.log({\n          mintWL\n        });\n        setCanMintWL(mintWL);\n        mintWL ? setFeedback(\"You are on the Whitelist!\") : setFeedback(`This wallet is not on the Whitelist`);\n        mintWL ? setDisable(false) : setDisable(true);\n        setDisplayCost(CONFIG.DISPLAY_COST_WL);\n      } else {\n        setDisplayCost(CONFIG.DISPLAY_COST_PU);\n      }\n    }\n  };\n\n  const getConfig = async () => {\n    const configResponse = await fetch(\"/config/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    });\n    const config = await configResponse.json();\n    SET_CONFIG(config);\n  };\n\n  useEffect(() => {\n    getConfig();\n    getDataWithoutWallet();\n  }, []);\n  useEffect(() => {\n    getData();\n  }, [blockchain.account]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Row, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(Home, \"pCKqbzqWz3XIT2lJ0uBdHZRSI/s=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/waleed/Desktop/MintWebsites/Mint-Nfts-dapp/src/pages/HomePage/Home.js"],"names":["React","useEffect","useState","useRef","useDispatch","useSelector","connect","connectWallet","fetchData","axios","Container","Row","Navbar","createAlchemyWeb3","ethers","require","Web3","Contract","Home","cost","dispatch","blockchain","state","data","claimingNft","setClaimingNft","mintDone","setMintDone","supply","setTotalSupply","feedback","setFeedback","mintAmount","setMintAmount","displayCost","setDisplayCost","setState","canMintWL","setCanMintWL","disable","setDisable","CONFIG","SET_CONFIG","CONTRACT_ADDRESS","SCAN_LINK","NETWORK","NAME","SYMBOL","ID","NFT_NAME","MAX_SUPPLY","WEI_COST","DISPLAY_COST","GAS_LIMIT","MARKETPLACE","MARKETPLACE_LINK","SHOW_BACKGROUND","claimNFTs","WEI_COST_WL","WEI_COST_PU","gasLimit","totalCostWei","String","totalGasLimit","smartContract","methods","mint","send","to","from","account","value","once","err","console","log","then","receipt","totalSupply","call","res","decrementMintAmount","newMintAmount","parseFloat","DISPLAY_COST_WL","toFixed","DISPLAY_COST_PU","incrementMintAmount","maxNfts","MAX_LIMIT","getDataWithoutWallet","web3","abiResponse","fetch","headers","Accept","abi","json","contract","setProvider","currentProvider","getData","currentState","mintWL","isWhitelisted","getConfig","configResponse","config"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { connect } from \"../../redux/blockchain/blockchainActions\";\nimport { connectWallet } from \"../../redux/blockchain/blockchainActions\";\nimport { fetchData } from \"./../../redux/data/dataActions\";\nimport axios from 'axios';\nimport { Container, Row } from \"react-bootstrap\";\nimport Navbar from \"../../components/Navbar\";\n\nconst { createAlchemyWeb3, ethers } = require(\"@alch/alchemy-web3\");\nvar Web3 = require('web3');\nvar Contract = require('web3-eth-contract');\n\nfunction Home() {\n  let cost = 0;\n  const dispatch = useDispatch();\n  const blockchain = useSelector((state) => state.blockchain);\n  const data = useSelector((state) => state.data);\n  const [claimingNft, setClaimingNft] = useState(false);\n  const [mintDone, setMintDone] = useState(false);\n  const [supply, setTotalSupply] = useState(0);\n  const [feedback, setFeedback] = useState(\"\");\n  const [mintAmount, setMintAmount] = useState(2);\n  const [displayCost, setDisplayCost] = useState(cost);\n  const [state, setState] = useState(-1);\n  const [canMintWL, setCanMintWL] = useState(false);\n  const [disable, setDisable] = useState(false);\n  const [CONFIG, SET_CONFIG] = useState({\n    CONTRACT_ADDRESS: \"\",\n    SCAN_LINK: \"\",\n    NETWORK: {\n      NAME: \"\",\n      SYMBOL: \"\",\n      ID: 0,\n    },\n    NFT_NAME: \"\",\n    SYMBOL: \"\",\n    MAX_SUPPLY: 1,\n    WEI_COST: 0,\n    DISPLAY_COST: 0,\n    GAS_LIMIT: 0,\n    MARKETPLACE: \"\",\n    MARKETPLACE_LINK: \"\",\n    SHOW_BACKGROUND: false,\n  });\n\n  const claimNFTs = () => {\n    let cost = 0;\n    if (state == 1) {\n      cost = CONFIG.WEI_COST_WL;\n    } else {\n      cost = CONFIG.WEI_COST_PU;\n    }\n\n    let gasLimit = CONFIG.GAS_LIMIT;\n    let totalCostWei = String(cost * mintAmount);\n    let totalGasLimit = String(gasLimit * mintAmount);\n    setFeedback(`Minting your ${CONFIG.NFT_NAME}`);\n    setClaimingNft(true);\n    setDisable(true);\n    blockchain.smartContract.methods\n      .mint(mintAmount)\n      .send({\n        gasLimit: String(totalGasLimit),\n        to: CONFIG.CONTRACT_ADDRESS,\n        from: blockchain.account,\n        value: totalCostWei,\n      })\n      .once(\"error\", (err) => {\n        console.log(err);\n        setFeedback(\"Sorry, something went wrong please try again later.\");\n        setClaimingNft(false);\n      })\n      .then((receipt) => {\n        setMintDone(true);\n        setFeedback(`Complete , Welcome to the Twisted Family!`);\n        setClaimingNft(false);\n        blockchain.smartContract.methods\n          .totalSupply()\n          .call()\n          .then((res) => {\n            setTotalSupply(res);\n          });\n\n        dispatch(fetchData(blockchain.account));\n      });\n  };\n\n  const decrementMintAmount = () => {\n    let newMintAmount = mintAmount - 2;\n    if (newMintAmount < 2) {\n      newMintAmount = 2;\n    }\n    setMintAmount(newMintAmount);\n    if(state == 0 || state == -1 ){\n      setDisplayCost(0.00);\n    }\n    else if (state == 1) {\n      setDisplayCost(\n        parseFloat(CONFIG.DISPLAY_COST_WL * newMintAmount).toFixed(3)\n      );\n    } else {\n      setDisplayCost(parseFloat(CONFIG.DISPLAY_COST_PU * newMintAmount).toFixed(3));\n    }\n\n    \n  };\n\n  const incrementMintAmount = () => {\n    let newMintAmount = mintAmount + 2;\n    console.log(newMintAmount);\n    if (newMintAmount > 8) {\n      newMintAmount = 8;\n    }\n    setMintAmount(newMintAmount);\n    if(state == 0 || state == -1 ){\n      setDisplayCost(0.00);\n    }\n    else if (state == 1) {\n      setDisplayCost(\n        parseFloat(CONFIG.DISPLAY_COST_WL * newMintAmount).toFixed(3)\n      );\n    } else {\n      setDisplayCost(parseFloat(CONFIG.DISPLAY_COST_PU * newMintAmount).toFixed(3));\n    }\n  };\n\n  const maxNfts = () => {\n    if(state == 0 || state == -1 ){\n      setDisplayCost(0.00);\n    }\n    else if (state == 1) {\n      setMintAmount(CONFIG.MAX_LIMIT);\n      setDisplayCost(\n        parseFloat(CONFIG.DISPLAY_COST_WL * CONFIG.MAX_LIMIT).toFixed(3)\n      );\n    } else {\n      setMintAmount(CONFIG.MAX_LIMIT);\n      setDisplayCost(parseFloat(CONFIG.DISPLAY_COST_PU * 8).toFixed(3));\n    }\n  };\n\n\n\n  const getDataWithoutWallet = async () => {\n    const web3 = createAlchemyWeb3(\"https://eth-mainnet.alchemyapi.io/v2/EDLW4rQqMI3LEJUWifxT04jTycowEQNU\");\n    const abiResponse = await fetch(\"/config/abi.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const abi = await abiResponse.json();\n    var contract = new Contract(abi, '0xB1B75818b813af1Ad69e8827533aE3bFFC81f137');\n    contract.setProvider(web3.currentProvider);\n    console.log(contract);\n    const totalSupply = await contract.methods\n      .totalSupply()\n      .call();\n    setTotalSupply(totalSupply);\n\n  }\n\n  const getData = async () => {\n    if (blockchain.account !== \"\" && blockchain.smartContract !== null) {\n      dispatch(fetchData(blockchain.account));\n      let currentState = await blockchain.smartContract.methods\n        .currentState()\n        .call();\n      console.log({ currentState });\n      setState(currentState);\n\n      if (currentState == 0) {\n        setDisplayCost(0.00);\n        setDisable(true);\n        setFeedback(\"Minting is not live yet!\")\n      } else if (currentState == 1) {\n        let mintWL = await blockchain.smartContract.methods\n          .isWhitelisted(blockchain.account)\n          .call();\n        console.log({ mintWL });\n        setCanMintWL(mintWL);\n        (mintWL) ? setFeedback(\"You are on the Whitelist!\") : setFeedback(`This wallet is not on the Whitelist`);\n        (mintWL) ? setDisable(false) : setDisable(true);\n\n        setDisplayCost(CONFIG.DISPLAY_COST_WL);\n      } else {\n        setDisplayCost(CONFIG.DISPLAY_COST_PU);\n      }\n    }\n  };\n\n  const getConfig = async () => {\n    const configResponse = await fetch(\"/config/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const config = await configResponse.json();\n    SET_CONFIG(config);\n  };\n\n  useEffect(() => {\n    getConfig();\n    getDataWithoutWallet();\n  }, []);\n\n  useEffect(() => {\n    getData();\n  }, [blockchain.account]);\n\n  return (\n    <>\n        <Container>\n          <div className=\"d-flex justify-content-center\">\n            <Row>\n              \n            </Row>\n          </div>\n         \n        </Container>\n    </>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}